<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style type="text/css">
        .div {
            width: 350px;
            height: 250px;
            padding: 10px;
            border: 1px solid #aaaaaa;
        }
    </style>
    <script type="text/javascript" src="Scripts/jquery-1.7.1.min.js"></script>
</head>
<body>
    <div id="checkVideoResult">
        <button onclick="checkVideo();">检查浏览器是否支持HTML5</button>
    </div>
    <fieldset>
        <legend>Video&Audio</legend>
        <video src="Content/Media/demo.mp4" width="300" height="200" controls="controls"></video>
        <audio src="Content/Media/buzhua.mp3" controls="controls" draggable="true"></audio>
    </fieldset>

    <fieldset>
        <legend>Drop</legend>
        <div id="div1" class="div" style="float: left;" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        <div id="div2" class="div" style="float: right; margin-right: 500px;" ondrop="drop(event)" ondragover="allowDrop(event)">
            <img id="drag1" src="Images/bro.jpg" draggable="true" ondragstart="drag(event)" width="300" height="200" title="我可以在两个框中来回拖到哦！！" />
        </div>
    </fieldset>

    <fieldset>
        <legend>Canvas</legend>
        <div>
            <canvas id="myCanvas" width="200" height="100" onmousemove="cnvs_getCoordinates(event)" onmouseout="cnvs_clearCoordinates()"></canvas>
            <span id="spanMsg"></span>
            <canvas id="myCanvas2" width="200" height="100" style="border: 1px solid #c3c3c3;">Your browser does not support the canvas element.
            </canvas>
        </div>
    </fieldset>

    <fieldset>
        <legend>Location</legend>
        <p id="demo">点击这个按钮，获得您的位置：</p>
        <button onclick="getLocation()">试一下</button>
        <div id="mapholder"></div>
    </fieldset>

    <fieldset>
        <legend>HTML5 INPUT</legend>
        <form action="http://www.w3school.com.cn/example/html5/demo_form.asp" method="get">
            E-mail:<input type="email" name="user_email" />
            URL:<input type="url" name="user_url" />
            Age:<input type="number" name="points" min="-2" max="10" step="2" value="0" />
            Points:<input type="range" name="point" min="-2" max="10" step="2" value="0" />
            Birthday:<input type="date" name="birthday" />
            Month:<input type="month" name="month" />
            Time:<input type="time" name="time" />
            Datetime:<input type="datetime-local" name="datetime" />
            <br /><input type="submit" />
        </form>
    </fieldset>
</body>

<script type="text/javascript">

    //#region check video

    function checkVideo() {
        if (!!document.createElement('video').canPlayType) {
            var vidTest = document.createElement("video");
            oggTest = vidTest.canPlayType('video/ogg; codecs="theora, vorbis"');
            if (!oggTest) {
                h264Test = vidTest.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
                if (!h264Test) {
                    document.getElementById("checkVideoResult").innerHTML = "Sorry. No video support."
                }
                else {
                    if (h264Test == "probably") {
                        document.getElementById("checkVideoResult").innerHTML = "Yes! Full support!";
                    }
                    else {
                        document.getElementById("checkVideoResult").innerHTML = "Well. Some support.";
                    }
                }
            }
            else {
                if (oggTest == "probably") {
                    document.getElementById("checkVideoResult").innerHTML = "Yes! Full support!";
                }
                else {
                    document.getElementById("checkVideoResult").innerHTML = "Well. Some support.";
                }
            }
        }
        else {
            document.getElementById("checkVideoResult").innerHTML = "Sorry. No video support."
        }
    }

    //#endregion

    //#region drag setting

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("Text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));
    }


    //#endregion

    //#region draw canvas

    //rect
    var c = document.getElementById("myCanvas");
    var cxt = c.getContext("2d");
    cxt.fillStyle = "#FF0000";
    cxt.fillRect(0, 0, 150, 75);

    //line
    cxt.moveTo(10, 10);
    cxt.lineTo(150, 50);
    cxt.lineTo(10, 50);
    cxt.stroke();

    //arc
    cxt.fillStyle = "#000000";
    cxt.beginPath();
    cxt.arc(70, 18, 15, 0, Math.PI * 2, true);
    cxt.closePath();
    cxt.fill();

    //img
    var c2 = document.getElementById("myCanvas2");
    var cxt2 = c2.getContext("2d");
    var img = new Image();
    img.src = "Images/bro.jpg";
    cxt2.drawImage(img, 0, 0);

    function cnvs_getCoordinates(e) {
        var x = e.clientX;
        var y = e.clientY;
        document.getElementById("spanMsg").innerHTML = "Coordinates:(" + x + "," + y + ")";
    }

    function cnvs_clearCoordinates() {
        document.getElementById("spanMsg").innerHTML = "";
    }
    //#endregion

    //#region set location

    var x = document.getElementById("demo");
    function getLocation() {
        if (navigator) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        }
        else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        var latlon = new google.maps.LatLng(lat, lon);
        var mapholder = document.getElementById("mapholder");
        mapholder.style.height = '250px';
        mapholder.style.width = '500px';

        var myOptions = {
            center: latlon,
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            navigationControlOptions: { style: google.maps.NavigationControlStyle.SMALL }
        };

        var map = new google.maps.Map(mapholder, myOptions);
        var marker = new google.maps.Marker({ position: latlon, map: map, title: "你在这！" });
    }

    function showError(error) {
        switch (error.code) {
            case error.PERMISSION_DENIED:
                x.innerHTML = "用户不允许获取位置信息！";
                break;
            case error.POSITION_UNAVAILABLE:
                x.innerHTML = "位置信息不合法！";
                break;
            case error.TIMEOUT:
                x.innerHTML = "请求超时！";
                break;
            case error.UNKNOW_ERROR:
                x.innerHTML = "未知错误！";
            default:

        }
    }
    //#endregion

    //#region JS基础功能

    $(function () {
        
        var myData = {
            name: "tony",
            weather: "sunny",
            printMessage: function () {
                for (var prop in myData) {
                    console.log("Name:" + prop + " Value:" + myData[prop]);
                }
            }
        };

        delete myData.name;

        var hasName = "name" in myData;
        console.log(hasName);

        myData.printMessage();
    });

    //#endregion

</script>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
</html>
